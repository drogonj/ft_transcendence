services:
  #postgres:
    #container_name: postgres
    #image: postgres:16.3
    #volumes:
    #  - ./services/volumes/postgres:/var/lib/postgresql/data/
    #env_file: services/.env
    #ports:
    #  - '{PORT}:{PORT_CONTAINER}'
    #networks:
    #  - network
    #healthcheck:
    #  test: ["CMD-SHELL", "pg_isready -U {POSTGRES_USER} -d {POSTGRES_DB}"]
    #  interval: 3s
    #  timeout: 3s
    #  retries: 3
  asgi:
    container_name: asgi
    build: ./services/asgi/
    #volumes:
    #  - ./services/volumes/:asgi/backend/
    ports:
      - "8000:8000"
    env_file: services/.env
    #depends_on:
      #postgres:
        #condition: service_healthy
    networks:
      - network
  nginx:
    container_name: nginx
    build: services/nginx
    #volumes:
    #  - {WEB_SITE_PATH}:/var/www/html
    ports:
      - "8080:443"
      - "8765:8765"
    restart: always
    depends_on:
      - asgi
    networks:
      - network

networks:
  network:
    driver: bridge