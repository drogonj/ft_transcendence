services:
  #postgres:
    #container_name: postgres
    #image: postgres:16.3
    #volumes:
    #  - ./services/volumes/postgres:/var/lib/postgresql/data/
    #env_file: services/.env
    #ports:
    #  - '{PORT}:{PORT_CONTAINER}'
    #networks:
    #  - network
    #healthcheck:
    #  test: ["CMD-SHELL", "pg_isready -U {POSTGRES_USER} -d {POSTGRES_DB}"]
    #  interval: 3s
    #  timeout: 3s
    #  retries: 3
  asgi:
    container_name: asgi
    build: ./services/asgi/
    volumes:
     - ./services/asgi:/tmp/asgi/
    ports:
      - "8081:8081"
    env_file: services/.env
    #depends_on:
      #postgres:
        #condition: service_healthy
    networks:
      - transcendence
  nginx:
    container_name: nginx
    build: ./services/nginx
    volumes:
      - ./services/nginx/html:/tmp/html
    ports:
     - "80:80"
     - "443:443"
    restart: always
    depends_on:
     - asgi
    networks:
     - transcendence

networks:
  transcendence:
    driver: bridge